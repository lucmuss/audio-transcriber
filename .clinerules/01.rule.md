# CLINE RULES - Audio Transcriber Pipeline

## AUSGABE-REGELN (Effizienzoptimierung!)
- KEINE Erklärungen, nur Code/YAML/Text
- KEINE Markdown-Dateien generieren (außer explizit angefragt)
- KEINE Code-Wiederholungen - nur geänderte Zeilen/Diffs zeigen
- KEINE Bestätigungsfragen - sofort implementieren
- MAX 50 Zeilen pro Antwort wenn möglich
- Bei großen Files: Nur Diff/Änderungen, nicht komplette Datei

## IMPLEMENTIERUNGS-REGELN
- Features VOLLSTÄNDIG implementieren (Datenstrukturen + Logik)
- Python-Konventionen: PEP 8, klare Funktionen, Kommentare bei Bedarf
- Modulares Design: `src/`, `data/`, `configs/`

## DATEI-STANDARDS UND PROJEKTSTRUKTUR
- **Quellcode:**
    - Hauptanwendungslogik in `src/audio_transcriber/`
    - CLI-Einstiegspunkt: `src/audio_transcriber/cli.py`
    - GUI-Einstiegspunkt: `src/audio_transcriber/gui.py`
- **Tests:** `tests/` Verzeichnis für alle Arten von Tests.
- **Beispiele:** `examples/` für Anwendungsbeispiele.
- **Dokumentation:** `docs/` Verzeichnis für projektspezifische Dokumentationen (z.B. Fehlerbehebung, Nutzungsbeispiele), inklusive Markdown-Dateien.
- **Konfigurationsdateien:**
    - `.flake8` für Flake8 Linter-Konfiguration.
    - `mypy.ini` für MyPy Typ-Checker-Konfiguration.
    - `pytest.ini` für Pytest Test-Runner-Konfiguration.
    - `pyproject.toml` für allgemeine Projektkonfiguration (Build, Black, Isort, Pytest-Overrides). Jedes Projekt **muss** eine `pyproject.toml`-Datei haben.

## CODE-QUALITÄT UND CI/CD-EINSTELLUNGEN
Das Projekt legt großen Wert auf hohe Codequalität, die durch eine robuste Continuous Integration (CI)-Einrichtung sichergestellt wird. Die CI prüft den Code umfassend auf Stil, potenzielle Fehler, Typsicherheit und Funktionalität.

### Linting & Code-Formatierung
- **Flake8**: Wird zur Durchsetzung des Code-Stils und zum Auffinden potenzieller Fehler verwendet.
    - `max-line-length = 100` wird strikt eingehalten.
    - **Ausnahmen/Ignorierungen:** `E203` (Whitespace vor ':'), `E501` (Zeile zu lang, von Black gehandhabt), `W503` (Zeilenumbruch vor binärem Operator, von Black gehandhabt), `E402` (Modul-Level-Import nicht am Anfang), `F401` (Modul importiert, aber unbenutzt), `C901` (Funktion zu komplex, akzeptabel für Orchestrierungsmethoden), `F541` (f-String ohne Platzhalter), `W293` (Leerzeile enthält Whitespace). Diese Ausnahmen sind so konfiguriert, dass sie Konflikte mit der automatischen Formatierung durch Black vermeiden und die Lesbarkeit verbessern, wo sie vertretbar sind.
    - `max-complexity = 10` wird beibehalten, um die Komplexität der Funktionen zu begrenzen.
- **Black**: Der Code-Formatter sorgt für eine konsistente Formatierung.
    - `line-length = 100` ist mit Flake8 abgestimmt.
    - Unterstützt Python-Versionen von 3.8 bis 3.12.
- **isort**: Ordnet Importe alphabetisch und in Abschnitte auf, um eine saubere Codebasis zu gewährleisten.
    - `profile = "black"` für Kompatibilität mit Black.
    - `line_length = 100`.
- **MyPy**: Ein statischer Typ-Checker, der zur Sicherstellung der Typsicherheit des Codes eingesetzt wird.
    - Überprüft das Verzeichnis `src/audio_transcriber`.
    - Warnt bei fehlenden Typ-Annotationen und potenziellen Typ-Fehlern.
    - `strict_optional = True` und `no_implicit_optional = True` für strengere Prüfungen.

### Tests
- **Pytest**: Der bevorzugte Test-Runner für Unit-, Integrations- und CLI-Tests.
    - **Test-Pfad:** `tests/`
    - **Addopts:** `--verbose`, `--strict-markers`, `--tb=short`, `--cov=audio_transcriber` (Code-Abdeckung) mit detaillierten Berichten (HTML, XML, Konsole).
    - **Test-Marker:** `unit`, `integration`, `cli`, `slow`, `requires_api` zur Kategorisierung und selektiven Ausführung von Tests.
    - **Code-Abdeckung (Coverage):** Stellt sicher, dass ein hoher Prozentsatz des Codes getestet wird. Ausgeschlossen sind boilerplate-Code wie `__repr__`, Error-Handling und Typ-Checking-spezifische Anweisungen, um eine realistische Abdeckungsrate zu gewährleisten.
- **Pre-commit Hooks**: Werden verwendet, um Linting- und Formatierungsprüfungen automatisch vor dem Commit auszuführen und so sicherzustellen, dass nur sauberer Code committet wird.

### Implementierungsqualität
- **DRY Prinzip:** Keine Code-Duplizierung
- **Input Validierung:** Robuste Behandlung von fehlenden Dateien/Daten
- **Fehlerbehandlung:** Klare Fehlermeldungen

## FINALE PRÜFUNG VOR ABSCHLUSS
Vor `attempt_completion` IMMER prüfen:
- [x] Alle relevanten Linting- und CI-Informationen wurden aus den Konfigurationsdateien extrahiert.
- [x] Die `.clinerules/01.rule.md` wurde unter Berücksichtigung der Projektstruktur und der CI-Einstellungen erstellt.
